{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DANBIHAN/noddleghost/app/api/upload/hero/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport path from \"path\";\r\nimport fs from \"fs/promises\";\r\nimport { randomUUID } from \"crypto\";\r\n\r\nexport const runtime = \"nodejs\"; // 파일 저장하려면 node runtime 필요\r\n\r\nexport async function POST(req: Request) {\r\n  const formData = await req.formData();\r\n  const file = formData.get(\"file\");\r\n\r\n  if (!file || !(file instanceof File)) {\r\n    return NextResponse.json({ error: \"file is required\" }, { status: 400 });\r\n  }\r\n\r\n  // 파일 타입 간단 검증 (이미지)\r\n  if (!file.type.startsWith(\"image/\")) {\r\n    return NextResponse.json({ error: \"image file only\" }, { status: 400 });\r\n  }\r\n\r\n  // 저장 경로: /public/uploads\r\n  const uploadsDir = path.join(process.cwd(), \"public\", \"uploads\");\r\n  await fs.mkdir(uploadsDir, { recursive: true });\r\n\r\n  // 확장자 추정\r\n  const ext = file.name.split(\".\").pop()?.toLowerCase() || \"png\";\r\n  const safeExt = ext.replace(/[^a-z0-9]/g, \"\") || \"png\";\r\n\r\n  const filename = `hero-${randomUUID()}.${safeExt}`;\r\n  const filepath = path.join(uploadsDir, filename);\r\n\r\n  const arrayBuffer = await file.arrayBuffer();\r\n  const buffer = Buffer.from(arrayBuffer);\r\n  await fs.writeFile(filepath, buffer);\r\n\r\n  // 브라우저에서 접근 가능한 URL\r\n  const url = `/uploads/${filename}`;\r\n\r\n  return NextResponse.json({ url });\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,MAAM,UAAU,UAAU,2BAA2B;AAErD,eAAe,KAAK,GAAY;IACrC,MAAM,WAAW,MAAM,IAAI,QAAQ;IACnC,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,QAAQ,CAAC,CAAC,gBAAgB,IAAI,GAAG;QACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAmB,GAAG;YAAE,QAAQ;QAAI;IACxE;IAEA,oBAAoB;IACpB,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,yBAAyB;IACzB,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU;IACtD,MAAM,gIAAE,CAAC,KAAK,CAAC,YAAY;QAAE,WAAW;IAAK;IAE7C,SAAS;IACT,MAAM,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,iBAAiB;IACzD,MAAM,UAAU,IAAI,OAAO,CAAC,cAAc,OAAO;IAEjD,MAAM,WAAW,CAAC,KAAK,EAAE,IAAA,mHAAU,IAAG,CAAC,EAAE,SAAS;IAClD,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,YAAY;IAEvC,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,SAAS,OAAO,IAAI,CAAC;IAC3B,MAAM,gIAAE,CAAC,SAAS,CAAC,UAAU;IAE7B,oBAAoB;IACpB,MAAM,MAAM,CAAC,SAAS,EAAE,UAAU;IAElC,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAI;AACjC"}}]
}